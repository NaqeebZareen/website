{"version":3,"sources":["webpack:///src/app/components/update-profile/update-profile-module/update-profile-routing.module.ts","webpack:///src/app/components/update-profile/update-profile-module/update-profile.module.ts","webpack:///src/app/components/update-profile/update-profile.component.ts","webpack:///src/app/components/update-profile/update-profile.component.html","webpack:///src/app/models/api-request-model/update-profile-model.ts"],"names":["routes","path","component","UpdateProfileRoutingModule","forChild","imports","exports","UpdateProfileModule","declarations","UpdateProfileComponent","router","getAccessTokenFromLocalStorage","srvAccountService","srvEndpointFactory","srvLocalStoragefactory","getProfileInformation","getUserProfileInfoEndpoint","access_token","subscribe","res","objUser","data","objUpdateProfile","getTokenFromLocalStorage","body","set","first_name","last_name","picture","user_id","updateUserProfileEndpoint","alert","navigate","err","error_stack","JSON","stringify","error_level","error_message","$event","files","target","file","reader","FileReader","onload","_handleReaderLoaded","bind","readAsBinaryString","readerEvt","binaryString","result","btoa","handleFileSelect","Update","selector","templateUrl","styleUrls","IUpdateProfileModel"],"mappings":"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","file":"components-update-profile-update-profile-module-update-profile-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { UpdateProfileComponent } from '../update-profile.component';\n\nconst routes: Routes = [\n  { path: 'update-profile', component: UpdateProfileComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class UpdateProfileRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { UpdateProfileRoutingModule } from './update-profile-routing.module';\nimport { UpdateProfileComponent } from '../update-profile.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [UpdateProfileComponent],\n  imports: [\n    CommonModule,\n    UpdateProfileRoutingModule,\n    FormsModule,\n    ReactiveFormsModule\n  ]\n})\nexport class UpdateProfileModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { AccountService } from 'src/app/services/account/account.service';\nimport { IUser } from 'src/app/models/user';\nimport { IUpdateProfileModel } from 'src/app/models/api-request-model/update-profile-model';\nimport { Router } from '@angular/router';\nimport { HttpParams } from '@angular/common/http';\nimport { EndpointFactoryService } from 'src/app/services/endpontFactory/endpoint-factory.service';\nimport { LocalStorageFactoryService } from 'src/app/services/localStorageFactory/local-storage-factory.service';\nimport { IRefreshTokenRequestModel } from 'src/app/models/refresh-token-request-model';\nimport { DBkeys } from 'src/app/services/dbkeys/db-keys';\n\n@Component({\n  selector: 'app-update-profile',\n  templateUrl: './update-profile.component.html',\n  styleUrls: ['./update-profile.component.css']\n})\nexport class UpdateProfileComponent implements OnInit {\n  // ... props ...\n  public objUser: IUser;\n  public objUpdateProfile: IUpdateProfileModel;\n  public tokenRequest: IRefreshTokenRequestModel;\n  private access_token: any;\n\n  constructor(private router: Router, private getAccessTokenFromLocalStorage: LocalStorageFactoryService, private srvAccountService: AccountService, private srvEndpointFactory: EndpointFactoryService, private srvLocalStoragefactory: LocalStorageFactoryService) {\n    this.objUser = new IUser();\n    this.objUpdateProfile = new IUpdateProfileModel();\n  }\n\n  ngOnInit() {\n    this.getProfileInformation();\n    this.access_token = this.getAccessTokenFromLocalStorage.getTokenFromLocalStorage();\n    // console.log(this.access_token);\n  }\n\n\n  Update() {\n\n\n\n    let body = new HttpParams();\n    body = body.set('first_name', this.objUpdateProfile.first_name);\n    body = body.set('last_name', this.objUpdateProfile.last_name);\n    body = body.set('picture', this.objUpdateProfile.picture);\n    body = body.set('user_id', this.objUser.user_id);\n\n    // var body2 = JSON.stringify({ body });\n    // var body1 = JSON.stringify({ \"first_name\": this.objUpdateProfile.first_name, \"last_name\": this.objUpdateProfile.last_name, \"picture\": this.objUpdateProfile.picture });\n    this.srvAccountService.updateUserProfileEndpoint(this.objUpdateProfile.first_name, this.objUpdateProfile.last_name, this.objUpdateProfile.picture, 'Bearer ' + this.access_token).subscribe(\n      res => {\n\n\n        alert(\"profile updated\");\n        this.router.navigate(['/']);\n      },\n      err => {\n\n        let error_stack = JSON.stringify(err);\n        let error_level = \"200\";\n        let error_message = err;\n\n      });\n  }\n\n  // let body = new HttpParams();\n  // body = body.set('first_name', this.objUser.first_name);\n  // body = body.set('last_name', this.objUser.last_name);\n  // body = body.set('picture', this.objUser.picture);\n  // var body2 = JSON.stringify({ body });\n  // var body1 = JSON.stringify({ \"first_name\": this.objUser.first_name, \"last_name\": this.objUser.last_name, \"picture\": this.objUser.picture });\n  // this.srvAccountService.updateUserProfileEndpoint(body2).subscribe(\n  //   res => {\n  //     // console.log(\"updated\");\n  //     alert(\"profile updated\");\n  //     this.router.navigate(['/Home']);\n  //   },\n  //   err => {\n  //     let error_stack = JSON.stringify(err);\n  //     let error_level = \"200\";\n  //     let error_message = err;\n\n  //   });\n\n\n  handleFileSelect($event) {\n    var files = $event.target.files;\n    var file = files[0];\n    if (files && file) {\n      var reader = new FileReader();\n      reader.onload = this._handleReaderLoaded.bind(this);\n      reader.readAsBinaryString(file);\n    }\n  }\n\n  _handleReaderLoaded(readerEvt) {\n    var binaryString = readerEvt.target.result;\n    this.objUpdateProfile.picture = btoa(binaryString);\n    // console.log(btoa(this.objUser.picture));\n  }\n  // get user info \n  getProfileInformation = () => {\n    this.srvAccountService.getUserProfileInfoEndpoint(this.access_token).subscribe(res => {\n      this.objUser = res['response'].data;\n\n    });\n  }\n\n}\n","<div class=\"login-form\">\n  <form action=\"/examples/actions/confirmation.php\" method=\"post\">\n    <h2 class=\"text-center fontstyle\">Update Profile</h2>\n    <div class=\"form-group fontstyle\">\n      <label>First Name</label>\n      <input type=\"text\" name=\"Fname\" class=\"form-control\" placeholder=\"FirstName\"\n        [(ngModel)]=\"objUpdateProfile.first_name\" required=\"required\">\n    </div>\n    <div class=\"form-group fontstyle\">\n      <label>Last Name</label>\n      <input type=\"text\" name=\"Lname\" class=\"form-control\" placeholder=\"LastName\"\n        [(ngModel)]=\"objUpdateProfile.last_name\" required=\"required\">\n    </div>\n    <div class=\"form-group fontstyle\">\n      <label>Choose Image</label>\n      <input type=\"file\" (change)=\"handleFileSelect($event)\">\n    </div>\n    <div class=\"form-group fontstyle\">\n      <button type=\"submit\" (click)=\"Update()\" class=\"btn btn-primary btn-block\">Update</button>\n    </div>\n  </form>\n</div>","export class IUpdateProfileModel {\n    first_name: string;\n    last_name: string;\n    picture: string;\n}\n"]}