{"version":3,"sources":["webpack:///src/app/shared/wishList-card/wishList-card-module/wishList-card-routing.module.ts","webpack:///src/app/shared/wishList-card/wishList-card-module/wishList-card.module.ts","webpack:///src/app/shared/wishList-card/wishList-card.component.ts","webpack:///src/app/shared/wishList-card/wishList-card.component.html"],"names":["routes","WishListCardRoutingModule","forChild","imports","exports","WishListCardModule","declarations","WishListCardComponent","srvJwthelperService","srvLoggingService","srvLocalStorageFactory","router","srvActivityService","unsubscribe","addToWishList","show","isLogin","verifyToken","objAddToWishList","activity_id","activity","id","is_wishlist","is_hosting","addToWishlistEndpointDelete","pipe","subscribe","res","error","addEventLog","getUserProfilePic","picture","action","objIEventLog","user_id","getfromLocalStorage","USER_ID","user_ip","IP","category","city","CITY","country","COUNTRY","controller","session_id","SESSION_ID","page","Event_SaveLogs","console","log","url","activityStartTime","start_time","format","activityTimePeriods","event","next","complete","selector","templateUrl","styleUrls"],"mappings":"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","file":"default~components-newwishlist-newwishlist-module-newwishlist-module~user-profile-wishlist-wishlist-~f01aaa4e-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class WishListCardRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { WishListCardRoutingModule } from './wishList-card-routing.module';\nimport { WishListCardComponent } from '../wishList-card.component';\n\n@NgModule({\n  declarations: [WishListCardComponent],\n  imports: [\n    CommonModule,\n    WishListCardRoutingModule\n  ],\n  exports: [WishListCardComponent]\n})\nexport class WishListCardModule { }\n","import {\n  Component,\n  OnInit,\n  Input,\n  OnDestroy,\n  AfterContentChecked\n} from '@angular/core';\nimport { PopularActivity } from 'src/app/models/popular-activity';\nimport * as moment from 'moment';\nimport { IEventLog } from 'src/app/models/event-log';\nimport { Subject } from 'rxjs';\nimport { JwtHelper } from 'src/app/services/jwtHelper/jwt-helper.service';\nimport { LoggingService } from 'src/app/services/loggingFactory/logging-service.service';\nimport { LocalStorageFactoryService } from 'src/app/services/localStorageFactory/local-storage-factory.service';\nimport { Router } from '@angular/router';\nimport { DBkeys } from 'src/app/services/dbkeys/db-keys';\nimport { takeUntil } from 'rxjs/operators';\nimport { IAddToWishList } from 'src/app/models/api-request-model/add-to-wish-list';\nimport { ActivityService } from 'src/app/services/activityFactory/activity.service';\nimport { IActivity } from 'src/app/models/activity';\n\n@Component({\n  selector: 'app-wish-list-card',\n  templateUrl: './wishList-card.component.html',\n  styleUrls: ['./wishList-card.component.css']\n})\nexport class WishListCardComponent\n  implements OnInit, OnDestroy, AfterContentChecked {\n\n  public show: boolean;\n  public activityStartTime: string;\n  public activityTimePeriods: string;\n  public page: string;\n  public controller: string;\n  public objIEventLog: IEventLog;\n  public objAddToWishList: IAddToWishList;\n  // subject to unsubscibe from obserable\n  public unsubscribe = new Subject<void>();\n\n  constructor(private srvJwthelperService: JwtHelper, private srvLoggingService: LoggingService, private srvLocalStorageFactory: LocalStorageFactoryService,\n    private router: Router, private srvActivityService: ActivityService) {\n    this.objIEventLog = new IEventLog();\n    this.objAddToWishList = new IAddToWishList();\n  }\n\n  @Input() activity: IActivity;\n\n  ngOnInit() {\n    this.controller = \"PopularCard\"\n    this.page = this.page = this.router.url;\n    // ide or show image\n\n    this.show = true;\n    this.activityStartTime = moment(this.activity.start_time, 'HH:mm').format('h:mm');\n    this.activityTimePeriods = moment(this.activity.start_time, 'HH:mm').format('A');\n    this.activity.is_wishlist = true;\n    // console.log(this.activity.is_wishlist);\n  }\n  // add to wish list .. \n  // here is problem in this api call \n  addToWishList = () => {\n\n    this.show = false;\n    const isLogin = this.srvJwthelperService.verifyToken();\n    if (isLogin) {\n      this.objAddToWishList.activity_id = this.activity.id;\n      this.objAddToWishList.is_wishlist = this.activity.is_wishlist;\n      // some api giving us different result the objects we getting have no is_hosting prop that why we assign false \n      this.objAddToWishList.is_hosting = false;\n      // console.log(\"in\");\n      // console.log(this.activity.is_wishlist);\n      // console.log(this.objAddToWishList.is_wishlist);\n      // console.log(this.activity.id);\n      if (this.activity.is_wishlist) {\n\n        // remove from wish list if wishlisted\n        this.show = false;\n        if (this.show === false) {\n          this.activity.is_wishlist = false;\n          this.objAddToWishList.is_wishlist = false;\n        }\n        // console.log(\"in\");\n        this.srvActivityService.addToWishlistEndpointDelete(this.objAddToWishList.activity_id).pipe(takeUntil(this.unsubscribe))\n          .subscribe(res => {\n\n            // console.log(res, \"21\");\n            this.show = false;\n            this.activity.is_wishlist = false;\n          }, error => {\n            this.activity.is_wishlist = true;\n            this.show = false;\n          });\n      }\n      // else {\n      //   // add to wish list \n      //   this.show = true;\n      //   this.srvActivityService.addToWishlistEndpointDelete(this.objAddToWishList.activity_id).pipe(takeUntil(this.unsubscribe))\n      //     .subscribe(res => {\n      //       console.log(\"11\");\n      //       this.show = true;\n      //       this.activity.is_wishlist = true;\n      //     }, error => {\n      //       this.activity.is_wishlist = false;\n      //       this.show = false;\n      //     });\n      // }\n      // track user \n      this.addEventLog('Remove from wishlist')\n    } else {\n\n      // console.log(\"out\");\n    }\n\n\n\n  }\n  // get image if not then return default..\n  getUserProfilePic = () => {\n    if (this.activity.picture) {\n      return this.activity.picture;\n    } else {\n      return (this.activity.picture =\n        '../../../assets/default-placeholder-300x300.png');\n    }\n  }\n\n\n  updateUrl(event) {\n    // console.log(event, this.activity.id, this.activity.title);\n    this.activity.picture = null;\n  }\n\n  // fuc to track user actions .\n  addEventLog = (action) => {\n    this.objIEventLog.user_id = this.srvLocalStorageFactory.getfromLocalStorage(DBkeys.USER_ID);\n    this.objIEventLog.user_ip = this.srvLocalStorageFactory.getfromLocalStorage(DBkeys.IP);\n    this.objIEventLog.action = action;\n    this.objIEventLog.category = 'button click';\n    this.objIEventLog.city = this.srvLocalStorageFactory.getfromLocalStorage(DBkeys.CITY);\n    this.objIEventLog.country = this.srvLocalStorageFactory.getfromLocalStorage(DBkeys.COUNTRY);\n    this.objIEventLog.controller = this.controller;\n    this.objIEventLog.session_id = this.srvLocalStorageFactory.getfromLocalStorage(DBkeys.SESSION_ID);\n    this.objIEventLog.page = this.page;\n\n    this.srvLoggingService.Event_SaveLogs(this.objIEventLog).pipe(takeUntil(this.unsubscribe)).subscribe(res => {\n\n    }, error => console.log(error));\n\n  }\n\n  // you have to tell angular that you updated the content after ngAfterContentChecked you can\n  // else we will get error ExpressionChangedAfterItHasBeenCheckedError: if we call fuc not in ngafterC\n  ngAfterContentChecked(): void {\n    this.activity.picture = this.getUserProfilePic();\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribe.next();\n    this.unsubscribe.complete();\n  }\n}\n","<div class=\"row ml-1 mr-1 mb-4 main-wrapper\">\n  <div *ngIf=\"activity.picture != null\" class=\"col-12 section-first p-0\">\n    <img [src]=\"activity.picture\" (error)=\"updateUrl($event)\" class=\"image\" alt=\"activity\">\n    <a class=\"wishlist\" style=\"cursor:pointer;\" (click)=\"addToWishList()\">\n      <span>\n        <img *ngIf=\"!show\" src=\"../../../assets/bookmark.png\" width=\"38\" alt=\"bookmark\" />\n        <img *ngIf=\"show\" src=\"../../../assets/bookmarked.png\" width=\"38\" alt=\"bookmarked\" />\n      </span>\n    </a>\n  </div>\n  <div *ngIf=\"activity.picture == null\" class=\"col-12 section-first p-0\"\n    style=\"background: #27AE60; height: 200px; text-align: center;\">\n    <a class=\"newAddition\" style=\"text-decoration: none;\" [routerLink]=\"['/activity-details', activity.id]\">\n      {{ activity.end_date | date: 'd MMM' }}\n    </a>\n\n    <a class=\"wishlist\" style=\"cursor:pointer;\" (click)=\"addToWishList()\">\n      <span>\n        <img *ngIf=\"!show\" class=\"img-size\" src=\"../../../assets/bookmark.png\" alt=\"bookmark\" />\n        <img *ngIf=\"show\" class=\"img-size\" src=\"../../../assets/bookmarked.png\" width=\"24\" alt=\"bookmarked\" />\n      </span>\n    </a>\n  </div>\n  <div class=\"col-12 section-second \">\n    <div class=\"date  mt-1 mt-3\">\n      {{ activity.end_date | date: 'E, MMM d, y' }} | <span>{{activityStartTime}}: {{activityTimePeriods}}</span>\n      <!-- <span *ngIf=\"this.activity.is_free\">Free</span>\n      <span *ngIf=\"!this.activity.is_free\">paid</span> -->\n    </div>\n    <div class=\"title  mt-1 mt-1\">\n      <a style=\"text-decoration : none\" [routerLink]=\"['/activity-details', activity.id]\">\n        {{ activity.title | slice: 0:50 }}\n      </a>\n    </div>\n    <hr\n      style=\"margin-right: -15px; margin-left: -15px; margin-top: 0px;margin-bottom: 0px;border-top: 0.9px solid rgba(0,0,0,.1);\">\n    <div class=\"float-left mt-2 mb-3 activity-place\">\n      <img src=\"../../../assets/searchPlace.svg\" alt=\"searchPlace\">\n      <span class=\"ml-2\">{{ activity.city }}</span>\n    </div>\n  </div>\n</div>"]}