{"version":3,"sources":["./src/app/components/update-profile/update-profile-module/update-profile-routing.module.ts","./src/app/components/update-profile/update-profile-module/update-profile.module.ts","./src/app/components/update-profile/update-profile.component.ts","./src/app/components/update-profile/update-profile.component.html","./src/app/models/api-request-model/update-profile-model.ts"],"names":[],"mappings":"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","file":"components-update-profile-update-profile-module-update-profile-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { UpdateProfileComponent } from '../update-profile.component';\n\nconst routes: Routes = [\n  { path: 'update-profile', component: UpdateProfileComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class UpdateProfileRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { UpdateProfileRoutingModule } from './update-profile-routing.module';\nimport { UpdateProfileComponent } from '../update-profile.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [UpdateProfileComponent],\n  imports: [\n    CommonModule,\n    UpdateProfileRoutingModule,\n    FormsModule,\n    ReactiveFormsModule\n  ]\n})\nexport class UpdateProfileModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { AccountService } from 'src/app/services/account/account.service';\nimport { IUser } from 'src/app/models/user';\nimport { IUpdateProfileModel } from 'src/app/models/api-request-model/update-profile-model';\nimport { Router } from '@angular/router';\nimport { HttpParams } from '@angular/common/http';\nimport { EndpointFactoryService } from 'src/app/services/endpontFactory/endpoint-factory.service';\nimport { LocalStorageFactoryService } from 'src/app/services/localStorageFactory/local-storage-factory.service';\nimport { IRefreshTokenRequestModel } from 'src/app/models/refresh-token-request-model';\nimport { DBkeys } from 'src/app/services/dbkeys/db-keys';\n\n@Component({\n  selector: 'app-update-profile',\n  templateUrl: './update-profile.component.html',\n  styleUrls: ['./update-profile.component.css']\n})\nexport class UpdateProfileComponent implements OnInit {\n  // ... props ...\n  public objUser: IUser;\n  public objUpdateProfile: IUpdateProfileModel;\n  public tokenRequest: IRefreshTokenRequestModel;\n  private access_token: any;\n\n  constructor(private router: Router, private getAccessTokenFromLocalStorage: LocalStorageFactoryService, private srvAccountService: AccountService, private srvEndpointFactory: EndpointFactoryService, private srvLocalStoragefactory: LocalStorageFactoryService) {\n    this.objUser = new IUser();\n    this.objUpdateProfile = new IUpdateProfileModel();\n  }\n\n  ngOnInit() {\n    this.getProfileInformation();\n    this.access_token = this.getAccessTokenFromLocalStorage.getTokenFromLocalStorage();\n    // console.log(this.access_token);\n  }\n\n\n  Update() {\n\n\n\n    let body = new HttpParams();\n    body = body.set('first_name', this.objUpdateProfile.first_name);\n    body = body.set('last_name', this.objUpdateProfile.last_name);\n    body = body.set('picture', this.objUpdateProfile.picture);\n    body = body.set('user_id', this.objUser.user_id);\n\n    // var body2 = JSON.stringify({ body });\n    // var body1 = JSON.stringify({ \"first_name\": this.objUpdateProfile.first_name, \"last_name\": this.objUpdateProfile.last_name, \"picture\": this.objUpdateProfile.picture });\n    this.srvAccountService.updateUserProfileEndpoint(this.objUpdateProfile.first_name, this.objUpdateProfile.last_name, this.objUpdateProfile.picture, 'Bearer ' + this.access_token).subscribe(\n      res => {\n\n\n        alert(\"profile updated\");\n        this.router.navigate(['/']);\n      },\n      err => {\n\n        let error_stack = JSON.stringify(err);\n        let error_level = \"200\";\n        let error_message = err;\n\n      });\n  }\n\n  // let body = new HttpParams();\n  // body = body.set('first_name', this.objUser.first_name);\n  // body = body.set('last_name', this.objUser.last_name);\n  // body = body.set('picture', this.objUser.picture);\n  // var body2 = JSON.stringify({ body });\n  // var body1 = JSON.stringify({ \"first_name\": this.objUser.first_name, \"last_name\": this.objUser.last_name, \"picture\": this.objUser.picture });\n  // this.srvAccountService.updateUserProfileEndpoint(body2).subscribe(\n  //   res => {\n  //     // console.log(\"updated\");\n  //     alert(\"profile updated\");\n  //     this.router.navigate(['/Home']);\n  //   },\n  //   err => {\n  //     let error_stack = JSON.stringify(err);\n  //     let error_level = \"200\";\n  //     let error_message = err;\n\n  //   });\n\n\n  handleFileSelect($event) {\n    var files = $event.target.files;\n    var file = files[0];\n    if (files && file) {\n      var reader = new FileReader();\n      reader.onload = this._handleReaderLoaded.bind(this);\n      reader.readAsBinaryString(file);\n    }\n  }\n\n  _handleReaderLoaded(readerEvt) {\n    var binaryString = readerEvt.target.result;\n    this.objUpdateProfile.picture = btoa(binaryString);\n    // console.log(btoa(this.objUser.picture));\n  }\n  // get user info \n  getProfileInformation = () => {\n    this.srvAccountService.getUserProfileInfoEndpoint(this.access_token).subscribe(res => {\n      this.objUser = res['response'].data;\n\n    });\n  }\n\n}\n","<div class=\"login-form\">\n  <form action=\"/examples/actions/confirmation.php\" method=\"post\">\n    <h2 class=\"text-center fontstyle\">Update Profile</h2>\n    <div class=\"form-group fontstyle\">\n      <label>First Name</label>\n      <input type=\"text\" name=\"Fname\" class=\"form-control\" placeholder=\"FirstName\"\n        [(ngModel)]=\"objUpdateProfile.first_name\" required=\"required\">\n    </div>\n    <div class=\"form-group fontstyle\">\n      <label>Last Name</label>\n      <input type=\"text\" name=\"Lname\" class=\"form-control\" placeholder=\"LastName\"\n        [(ngModel)]=\"objUpdateProfile.last_name\" required=\"required\">\n    </div>\n    <div class=\"form-group fontstyle\">\n      <label>Choose Image</label>\n      <input type=\"file\" (change)=\"handleFileSelect($event)\">\n    </div>\n    <div class=\"form-group fontstyle\">\n      <button type=\"submit\" (click)=\"Update()\" class=\"btn btn-primary btn-block\">Update</button>\n    </div>\n  </form>\n</div>","export class IUpdateProfileModel {\n    first_name: string;\n    last_name: string;\n    picture: string;\n}\n"],"sourceRoot":"webpack:///"}