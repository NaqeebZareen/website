{"version":3,"sources":["./src/app/shared/wishList-card/wishList-card-module/wishList-card-routing.module.ts","./src/app/shared/wishList-card/wishList-card-module/wishList-card.module.ts","./src/app/shared/wishList-card/wishList-card.component.ts","./src/app/shared/wishList-card/wishList-card.component.html"],"names":[],"mappings":"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","file":"default~components-newwishlist-newwishlist-module-newwishlist-module~user-profile-wishlist-wishlist-~f01aaa4e-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class WishListCardRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { WishListCardRoutingModule } from './wishList-card-routing.module';\nimport { WishListCardComponent } from '../wishList-card.component';\n\n@NgModule({\n  declarations: [WishListCardComponent],\n  imports: [\n    CommonModule,\n    WishListCardRoutingModule\n  ],\n  exports: [WishListCardComponent]\n})\nexport class WishListCardModule { }\n","import {\n  Component,\n  OnInit,\n  Input,\n  OnDestroy,\n  AfterContentChecked\n} from '@angular/core';\nimport { PopularActivity } from 'src/app/models/popular-activity';\nimport * as moment from 'moment';\nimport { IEventLog } from 'src/app/models/event-log';\nimport { Subject } from 'rxjs';\nimport { JwtHelper } from 'src/app/services/jwtHelper/jwt-helper.service';\nimport { LoggingService } from 'src/app/services/loggingFactory/logging-service.service';\nimport { LocalStorageFactoryService } from 'src/app/services/localStorageFactory/local-storage-factory.service';\nimport { Router } from '@angular/router';\nimport { DBkeys } from 'src/app/services/dbkeys/db-keys';\nimport { takeUntil } from 'rxjs/operators';\nimport { IAddToWishList } from 'src/app/models/api-request-model/add-to-wish-list';\nimport { ActivityService } from 'src/app/services/activityFactory/activity.service';\nimport { IActivity } from 'src/app/models/activity';\n\n@Component({\n  selector: 'app-wish-list-card',\n  templateUrl: './wishList-card.component.html',\n  styleUrls: ['./wishList-card.component.css']\n})\nexport class WishListCardComponent\n  implements OnInit, OnDestroy, AfterContentChecked {\n\n  public show: boolean;\n  public activityStartTime: string;\n  public activityTimePeriods: string;\n  public page: string;\n  public controller: string;\n  public objIEventLog: IEventLog;\n  public objAddToWishList: IAddToWishList;\n  // subject to unsubscibe from obserable\n  public unsubscribe = new Subject<void>();\n\n  constructor(private srvJwthelperService: JwtHelper, private srvLoggingService: LoggingService, private srvLocalStorageFactory: LocalStorageFactoryService,\n    private router: Router, private srvActivityService: ActivityService) {\n    this.objIEventLog = new IEventLog();\n    this.objAddToWishList = new IAddToWishList();\n  }\n\n  @Input() activity: IActivity;\n\n  ngOnInit() {\n    this.controller = \"PopularCard\"\n    this.page = this.page = this.router.url;\n    // ide or show image\n\n    this.show = true;\n    this.activityStartTime = moment(this.activity.start_time, 'HH:mm').format('h:mm');\n    this.activityTimePeriods = moment(this.activity.start_time, 'HH:mm').format('A');\n    this.activity.is_wishlist = true;\n    // console.log(this.activity.is_wishlist);\n  }\n  // add to wish list .. \n  // here is problem in this api call \n  addToWishList = () => {\n\n    this.show = false;\n    const isLogin = this.srvJwthelperService.verifyToken();\n    if (isLogin) {\n      this.objAddToWishList.activity_id = this.activity.id;\n      this.objAddToWishList.is_wishlist = this.activity.is_wishlist;\n      // some api giving us different result the objects we getting have no is_hosting prop that why we assign false \n      this.objAddToWishList.is_hosting = false;\n      // console.log(\"in\");\n      // console.log(this.activity.is_wishlist);\n      // console.log(this.objAddToWishList.is_wishlist);\n      // console.log(this.activity.id);\n      if (this.activity.is_wishlist) {\n\n        // remove from wish list if wishlisted\n        this.show = false;\n        if (this.show === false) {\n          this.activity.is_wishlist = false;\n          this.objAddToWishList.is_wishlist = false;\n        }\n        // console.log(\"in\");\n        this.srvActivityService.addToWishlistEndpointDelete(this.objAddToWishList.activity_id).pipe(takeUntil(this.unsubscribe))\n          .subscribe(res => {\n\n            // console.log(res, \"21\");\n            this.show = false;\n            this.activity.is_wishlist = false;\n          }, error => {\n            this.activity.is_wishlist = true;\n            this.show = false;\n          });\n      }\n      // else {\n      //   // add to wish list \n      //   this.show = true;\n      //   this.srvActivityService.addToWishlistEndpointDelete(this.objAddToWishList.activity_id).pipe(takeUntil(this.unsubscribe))\n      //     .subscribe(res => {\n      //       console.log(\"11\");\n      //       this.show = true;\n      //       this.activity.is_wishlist = true;\n      //     }, error => {\n      //       this.activity.is_wishlist = false;\n      //       this.show = false;\n      //     });\n      // }\n      // track user \n      this.addEventLog('Remove from wishlist')\n    } else {\n\n      // console.log(\"out\");\n    }\n\n\n\n  }\n  // get image if not then return default..\n  getUserProfilePic = () => {\n    if (this.activity.picture) {\n      return this.activity.picture;\n    } else {\n      return (this.activity.picture =\n        '../../../assets/default-placeholder-300x300.png');\n    }\n  }\n\n\n  updateUrl(event) {\n    // console.log(event, this.activity.id, this.activity.title);\n    this.activity.picture = null;\n  }\n\n  // fuc to track user actions .\n  addEventLog = (action) => {\n    this.objIEventLog.user_id = this.srvLocalStorageFactory.getfromLocalStorage(DBkeys.USER_ID);\n    this.objIEventLog.user_ip = this.srvLocalStorageFactory.getfromLocalStorage(DBkeys.IP);\n    this.objIEventLog.action = action;\n    this.objIEventLog.category = 'button click';\n    this.objIEventLog.city = this.srvLocalStorageFactory.getfromLocalStorage(DBkeys.CITY);\n    this.objIEventLog.country = this.srvLocalStorageFactory.getfromLocalStorage(DBkeys.COUNTRY);\n    this.objIEventLog.controller = this.controller;\n    this.objIEventLog.session_id = this.srvLocalStorageFactory.getfromLocalStorage(DBkeys.SESSION_ID);\n    this.objIEventLog.page = this.page;\n\n    this.srvLoggingService.Event_SaveLogs(this.objIEventLog).pipe(takeUntil(this.unsubscribe)).subscribe(res => {\n\n    }, error => console.log(error));\n\n  }\n\n  // you have to tell angular that you updated the content after ngAfterContentChecked you can\n  // else we will get error ExpressionChangedAfterItHasBeenCheckedError: if we call fuc not in ngafterC\n  ngAfterContentChecked(): void {\n    this.activity.picture = this.getUserProfilePic();\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribe.next();\n    this.unsubscribe.complete();\n  }\n}\n","<div class=\"row ml-1 mr-1 mb-4 main-wrapper\">\n  <div *ngIf=\"activity.picture != null\" class=\"col-12 section-first p-0\">\n    <img [src]=\"activity.picture\" (error)=\"updateUrl($event)\" class=\"image\" alt=\"activity\">\n    <a class=\"wishlist\" style=\"cursor:pointer;\" (click)=\"addToWishList()\">\n      <span>\n        <img *ngIf=\"!show\" src=\"../../../assets/bookmark.png\" width=\"38\" alt=\"bookmark\" />\n        <img *ngIf=\"show\" src=\"../../../assets/bookmarked.png\" width=\"38\" alt=\"bookmarked\" />\n      </span>\n    </a>\n  </div>\n  <div *ngIf=\"activity.picture == null\" class=\"col-12 section-first p-0\"\n    style=\"background: #27AE60; height: 200px; text-align: center;\">\n    <a class=\"newAddition\" style=\"text-decoration: none;\" [routerLink]=\"['/activity-details', activity.id]\">\n      {{ activity.end_date | date: 'd MMM' }}\n    </a>\n\n    <a class=\"wishlist\" style=\"cursor:pointer;\" (click)=\"addToWishList()\">\n      <span>\n        <img *ngIf=\"!show\" class=\"img-size\" src=\"../../../assets/bookmark.png\" alt=\"bookmark\" />\n        <img *ngIf=\"show\" class=\"img-size\" src=\"../../../assets/bookmarked.png\" width=\"24\" alt=\"bookmarked\" />\n      </span>\n    </a>\n  </div>\n  <div class=\"col-12 section-second \">\n    <div class=\"date  mt-1 mt-3\">\n      {{ activity.end_date | date: 'E, MMM d, y' }} | <span>{{activityStartTime}}: {{activityTimePeriods}}</span>\n      <!-- <span *ngIf=\"this.activity.is_free\">Free</span>\n      <span *ngIf=\"!this.activity.is_free\">paid</span> -->\n    </div>\n    <div class=\"title  mt-1 mt-1\">\n      <a style=\"text-decoration : none\" [routerLink]=\"['/activity-details', activity.id]\">\n        {{ activity.title | slice: 0:50 }}\n      </a>\n    </div>\n    <hr\n      style=\"margin-right: -15px; margin-left: -15px; margin-top: 0px;margin-bottom: 0px;border-top: 0.9px solid rgba(0,0,0,.1);\">\n    <div class=\"float-left mt-2 mb-3 activity-place\">\n      <img src=\"../../../assets/searchPlace.svg\" alt=\"searchPlace\">\n      <span class=\"ml-2\">{{ activity.city }}</span>\n    </div>\n  </div>\n</div>"],"sourceRoot":"webpack:///"}