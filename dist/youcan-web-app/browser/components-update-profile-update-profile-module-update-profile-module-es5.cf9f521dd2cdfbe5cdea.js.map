{"version":3,"sources":["webpack:///src/app/components/update-profile/update-profile.component.ts","webpack:///src/app/components/update-profile/update-profile-module/update-profile-routing.module.ts","webpack:///src/app/models/api-request-model/update-profile-model.ts","webpack:///src/app/components/update-profile/update-profile.component.html","webpack:///src/app/components/update-profile/update-profile-module/update-profile.module.ts"],"names":["UpdateProfileComponent","UpdateProfileRoutingModule","IUpdateProfileModel","routes","path","component","router","getAccessTokenFromLocalStorage","srvAccountService","srvEndpointFactory","srvLocalStoragefactory","getProfileInformation","this","getUserProfileInfoEndpoint","access_token","subscribe","res","objUser","data","objUpdateProfile","getTokenFromLocalStorage","body","set","first_name","last_name","picture","user_id","updateUserProfileEndpoint","alert","navigate","err","JSON","stringify","$event","files","target","file","reader","FileReader","onload","_handleReaderLoaded","bind","readAsBinaryString","readerEvt","btoa","result","handleFileSelect","Update","forChild","UpdateProfileModule"],"mappings":"6eAgBaA,ECJAC,E,oCCZAC,E,8GDIPC,EAAiB,CACrB,CAAEC,KAAM,iBAAkBC,WDWfL,EAAN,WAOL,WAAoBM,EAAwBC,EAAoEC,EAA2CC,EAAoDC,sCAA3L,KAAAJ,SAAwB,KAAAC,iCAAoE,KAAAC,oBAA2C,KAAAC,qBAAoD,KAAAC,yBA4E/M,KAAAC,sBAAwB,WACtBC,EAAKJ,kBAAkBK,2BAA2BD,EAAKE,cAAcC,WAAUC,YAC7EJ,EAAKK,QAAUD,EAAc,SAAEE,SA7EjCN,KAAKK,QAAU,IAAI,IACnBL,KAAKO,iBAAmB,IAAIjB,EATzB,wDAaHU,KAAKD,wBACLC,KAAKE,aAAeF,KAAKL,+BAA+Ba,6BAdrD,+BAmBG,WAIFC,EAAO,IAAI,IAIfA,GADAA,GADAA,GADAA,EAAOA,EAAKC,IAAI,aAAcV,KAAKO,iBAAiBI,aACxCD,IAAI,YAAaV,KAAKO,iBAAiBK,YACvCF,IAAI,UAAWV,KAAKO,iBAAiBM,UACrCH,IAAI,UAAWV,KAAKK,QAAQS,SAIxCd,KAAKJ,kBAAkBmB,0BAA0Bf,KAAKO,iBAAiBI,WAAYX,KAAKO,iBAAiBK,UAAWZ,KAAKO,iBAAiBM,QAAS,UAAYb,KAAKE,cAAcC,WAChLC,YAGEY,MAAM,mBACNhB,EAAKN,OAAOuB,SAAS,CAAC,SAExBC,YAEoBC,KAAKC,UAAUF,QAxClC,uCAmEYG,GACf,IAAIC,EAAQD,EAAOE,OAAOD,MACtBE,EAAOF,EAAM,GACjB,GAAIA,GAASE,EAAM,CACjB,IAAIC,EAAS,IAAIC,WACjBD,EAAOE,OAAS3B,KAAK4B,oBAAoBC,KAAK7B,MAC9CyB,EAAOK,mBAAmBN,MAzEzB,0CA6EeO,GAElB/B,KAAKO,iBAAiBM,QAAUmB,KADbD,EAAUR,OAAOU,YA9EjC,K,sCAAM7C,GAAsB,gM,mDAAtBA,EAAsB,qjBGhBnC,yCACE,0CACE,wCAAkC,0CAAc,8BAChD,yCACE,yCAAO,sCAAU,8BACjB,2CACE,iGADF,8BAEF,8BACA,yCACE,yCAAO,sCAAS,8BAChB,4CACE,gGADF,8BAEF,8BACA,0CACE,0CAAO,yCAAY,8BACnB,4CAAmB,uDAAU,EAAA8C,iBAAA,MAA7B,8BACF,8BACA,0CACE,6CAAsB,qDAAS,EAAAC,YAA4C,mCAAM,8BACnF,8BACF,8BACF,+B,MAfQ,+FAKA,gG,i0BFCD,IAAM9C,EAAN,uC,gDAAMA,I,+EAAAA,IAA0B,SAH5B,CAAC,IAAa+C,SAAS7C,IACtB,O,GGTZ,oDAeO,IAAM8C,EAAN,IAAMA,EAAN,uC,gDAAMA,I,+EAAAA,IAAmB,SAPrB,CACP,IACA,EACA,IACA,Q","file":"x","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AccountService } from 'src/app/services/account/account.service';\nimport { IUser } from 'src/app/models/user';\nimport { IUpdateProfileModel } from 'src/app/models/api-request-model/update-profile-model';\nimport { Router } from '@angular/router';\nimport { HttpParams } from '@angular/common/http';\nimport { EndpointFactoryService } from 'src/app/services/endpontFactory/endpoint-factory.service';\nimport { LocalStorageFactoryService } from 'src/app/services/localStorageFactory/local-storage-factory.service';\nimport { IRefreshTokenRequestModel } from 'src/app/models/refresh-token-request-model';\nimport { DBkeys } from 'src/app/services/dbkeys/db-keys';\n\n@Component({\n  selector: 'app-update-profile',\n  templateUrl: './update-profile.component.html',\n  styleUrls: ['./update-profile.component.css']\n})\nexport class UpdateProfileComponent implements OnInit {\n  // ... props ...\n  public objUser: IUser;\n  public objUpdateProfile: IUpdateProfileModel;\n  public tokenRequest: IRefreshTokenRequestModel;\n  private access_token: any;\n\n  constructor(private router: Router, private getAccessTokenFromLocalStorage: LocalStorageFactoryService, private srvAccountService: AccountService, private srvEndpointFactory: EndpointFactoryService, private srvLocalStoragefactory: LocalStorageFactoryService) {\n    this.objUser = new IUser();\n    this.objUpdateProfile = new IUpdateProfileModel();\n  }\n\n  ngOnInit() {\n    this.getProfileInformation();\n    this.access_token = this.getAccessTokenFromLocalStorage.getTokenFromLocalStorage();\n    // console.log(this.access_token);\n  }\n\n\n  Update() {\n\n\n\n    let body = new HttpParams();\n    body = body.set('first_name', this.objUpdateProfile.first_name);\n    body = body.set('last_name', this.objUpdateProfile.last_name);\n    body = body.set('picture', this.objUpdateProfile.picture);\n    body = body.set('user_id', this.objUser.user_id);\n\n    // var body2 = JSON.stringify({ body });\n    // var body1 = JSON.stringify({ \"first_name\": this.objUpdateProfile.first_name, \"last_name\": this.objUpdateProfile.last_name, \"picture\": this.objUpdateProfile.picture });\n    this.srvAccountService.updateUserProfileEndpoint(this.objUpdateProfile.first_name, this.objUpdateProfile.last_name, this.objUpdateProfile.picture, 'Bearer ' + this.access_token).subscribe(\n      res => {\n\n\n        alert(\"profile updated\");\n        this.router.navigate(['/']);\n      },\n      err => {\n\n        let error_stack = JSON.stringify(err);\n        let error_level = \"200\";\n        let error_message = err;\n\n      });\n  }\n\n  // let body = new HttpParams();\n  // body = body.set('first_name', this.objUser.first_name);\n  // body = body.set('last_name', this.objUser.last_name);\n  // body = body.set('picture', this.objUser.picture);\n  // var body2 = JSON.stringify({ body });\n  // var body1 = JSON.stringify({ \"first_name\": this.objUser.first_name, \"last_name\": this.objUser.last_name, \"picture\": this.objUser.picture });\n  // this.srvAccountService.updateUserProfileEndpoint(body2).subscribe(\n  //   res => {\n  //     // console.log(\"updated\");\n  //     alert(\"profile updated\");\n  //     this.router.navigate(['/Home']);\n  //   },\n  //   err => {\n  //     let error_stack = JSON.stringify(err);\n  //     let error_level = \"200\";\n  //     let error_message = err;\n\n  //   });\n\n\n  handleFileSelect($event) {\n    var files = $event.target.files;\n    var file = files[0];\n    if (files && file) {\n      var reader = new FileReader();\n      reader.onload = this._handleReaderLoaded.bind(this);\n      reader.readAsBinaryString(file);\n    }\n  }\n\n  _handleReaderLoaded(readerEvt) {\n    var binaryString = readerEvt.target.result;\n    this.objUpdateProfile.picture = btoa(binaryString);\n    // console.log(btoa(this.objUser.picture));\n  }\n  // get user info \n  getProfileInformation = () => {\n    this.srvAccountService.getUserProfileInfoEndpoint(this.access_token).subscribe(res => {\n      this.objUser = res['response'].data;\n\n    });\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { UpdateProfileComponent } from '../update-profile.component';\n\nconst routes: Routes = [\n  { path: 'update-profile', component: UpdateProfileComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class UpdateProfileRoutingModule { }\n","export class IUpdateProfileModel {\n    first_name: string;\n    last_name: string;\n    picture: string;\n}\n","<div class=\"login-form\">\n  <form action=\"/examples/actions/confirmation.php\" method=\"post\">\n    <h2 class=\"text-center fontstyle\">Update Profile</h2>\n    <div class=\"form-group fontstyle\">\n      <label>First Name</label>\n      <input type=\"text\" name=\"Fname\" class=\"form-control\" placeholder=\"FirstName\"\n        [(ngModel)]=\"objUpdateProfile.first_name\" required=\"required\">\n    </div>\n    <div class=\"form-group fontstyle\">\n      <label>Last Name</label>\n      <input type=\"text\" name=\"Lname\" class=\"form-control\" placeholder=\"LastName\"\n        [(ngModel)]=\"objUpdateProfile.last_name\" required=\"required\">\n    </div>\n    <div class=\"form-group fontstyle\">\n      <label>Choose Image</label>\n      <input type=\"file\" (change)=\"handleFileSelect($event)\">\n    </div>\n    <div class=\"form-group fontstyle\">\n      <button type=\"submit\" (click)=\"Update()\" class=\"btn btn-primary btn-block\">Update</button>\n    </div>\n  </form>\n</div>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { UpdateProfileRoutingModule } from './update-profile-routing.module';\nimport { UpdateProfileComponent } from '../update-profile.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [UpdateProfileComponent],\n  imports: [\n    CommonModule,\n    UpdateProfileRoutingModule,\n    FormsModule,\n    ReactiveFormsModule\n  ]\n})\nexport class UpdateProfileModule { }\n"]}